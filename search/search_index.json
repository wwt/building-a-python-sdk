{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Learn to Build a Basic Python SDK Practice is critical in acquiring any new skill and automation is no exception. This repository will walk you through the creation of a simple, non-production Python SDK. The goal is not to create a production quality Python SDK since these already exist for many of the Cisco products, but rather to provide some guided practice using many of the requisite skills of an automation engineer today. Some of the skills you will practice in this walk-through are: Docker and Development Environments Version Control Basic Linux Commands Python Fundamentals Common Data Formats (specifically JSON) REST APIs Development Design Patterns and Methodology Through the remainder of this guide you will be walked, step-by-step, through the process of building your own SDK. Prerequisite Skills This walk-through assumes knowledge of: git Docker Python Fundamentals REST APIs What are you going to build? Through this guided walk-through you will build a \"relatively\" simple Python Software Development Kit (SDK) to interface with Cisco's DNA Center. Fundamentally, this SDK will have the following high-level architecture: There will be a Python package as depicted with a folder and two Python modules contained within. The two Python modules together will enable the communication with DNA Center. session.py will be responsible for maintaining the attributes related to establishing an HTTP session with the target host and client.py will act as the interface for the consumer of your SDK. Next Up The objective of this walk-through is simply to provide some guided practice of some of they key skills in the development and automation lifecycle. Feel free to deviate off course to experience and practice outside of the confines of this walk-through. Next, you will have the opportunity to practice some basic version control, Docker, and basic Linux skills getting the the project environment setup.","title":"Home"},{"location":"#learn-to-build-a-basic-python-sdk","text":"Practice is critical in acquiring any new skill and automation is no exception. This repository will walk you through the creation of a simple, non-production Python SDK. The goal is not to create a production quality Python SDK since these already exist for many of the Cisco products, but rather to provide some guided practice using many of the requisite skills of an automation engineer today. Some of the skills you will practice in this walk-through are: Docker and Development Environments Version Control Basic Linux Commands Python Fundamentals Common Data Formats (specifically JSON) REST APIs Development Design Patterns and Methodology Through the remainder of this guide you will be walked, step-by-step, through the process of building your own SDK.","title":"Learn to Build a Basic Python SDK"},{"location":"#prerequisite-skills","text":"This walk-through assumes knowledge of: git Docker Python Fundamentals REST APIs","title":"Prerequisite Skills"},{"location":"#what-are-you-going-to-build","text":"Through this guided walk-through you will build a \"relatively\" simple Python Software Development Kit (SDK) to interface with Cisco's DNA Center. Fundamentally, this SDK will have the following high-level architecture: There will be a Python package as depicted with a folder and two Python modules contained within. The two Python modules together will enable the communication with DNA Center. session.py will be responsible for maintaining the attributes related to establishing an HTTP session with the target host and client.py will act as the interface for the consumer of your SDK.","title":"What are you going to build?"},{"location":"#next-up","text":"The objective of this walk-through is simply to provide some guided practice of some of they key skills in the development and automation lifecycle. Feel free to deviate off course to experience and practice outside of the confines of this walk-through. Next, you will have the opportunity to practice some basic version control, Docker, and basic Linux skills getting the the project environment setup.","title":"Next Up"},{"location":"conclusion/","text":"Conclusion This guided walk through was intended to provide practice and exposure to building a software development kit to refine your experience with REST APIs, Python, Docker and more. The contents of this walk-through should provide you with a good foundation to understand how to structure a REST API wrapper SDK that you can apply to other projects in the future. Keep Learning!","title":"Wrap up"},{"location":"conclusion/#conclusion","text":"This guided walk through was intended to provide practice and exposure to building a software development kit to refine your experience with REST APIs, Python, Docker and more. The contents of this walk-through should provide you with a good foundation to understand how to structure a REST API wrapper SDK that you can apply to other projects in the future. Keep Learning!","title":"Conclusion"},{"location":"module-0/","text":"Getting Setup As with any development project there are some initial setup steps that are required to get things rolling. In the case of this walk-through, the repository already exists as a starting point. This section walks you through the process of cloning that repository down to your local machine, activating the development environment, and opening the project in your Integrated Development Environment. Clone the Repo One of the very first skills you learn when starting the journey to becoming an automation engineer is version control. This is a key skill in the development/automation lifecycle. There are many, many command line options and details to understand about git but in typical daily workflows you will find yourself using a subset of them. Below are the six most common git commands used in a typical development workflow. Many IDE's provide version control integration that allows you to utilize the UI in order to perform these functions. You can chose what method works best for your personal workflow. The steps below show how to clone a repo from a terminal window. STEPS STEP 1. NAVIGATE to the repo on GitHub building-a-python-sdk (Login to GitHub if required) STEP 2. CLICK the Code button STEP 3. SELECT the transport (HTTPS or SSH) STEP 4. CLICK the Copy icon STEP 5. OPEN a new Terminal STEP 6. PASTE git clone plus that string into your Terminal Example SSH git clone git@github.com:wwt/building-a-python-sdk.git HTTPS git clone https://github.com/wwt/building-a-python-sdk.git Important The command above will clone down the repository creating a subfolder with the name of the repo in the folder where you ran the command. Development Environment All code in this walk-through was developed in a Docker container that was created from the Dockerfile included in the repository. Including the Dockerfile in the repository means we can avoid the \"...it works on my machine problem...\" by using containers and also makes the container definition travel adjacent to the code. Below will cover using the Docker container for your execution environment. Just click the tab that meets your needs: STEP 1. OPEN the new Folder in your Integrated Development Environment Visual Studio Code If you are running Visual Studio Code as your IDE, and have the Remove Development Extension pack installed ( ms-vscode-remote.vscode-remote-extensionpack ) you can simply open the root directory of this project, then select Reopen in Container when prompted (dialog box in the lower right corner). The repository contains a portable development environment in the form of a Dockerfile , requirements.txt , and .devcontainer.json files. This special integration with Visual Studio Code simplifies developing in a containerized development environment non-Visual Studio Code If you are not using Visual Studio Code you can still utilize the Dockerfile packaged with the repository but some manual build and launch steps will be necessary. Ensure you are in the root of the building-a-python-sdk project BUILD the Docker Image docker image build -t building-a-python-sdk . RUN the Docker Container docker container run -itv $PWD:/building-a-python-sdk building-a-python-sdk This repo contains a starting framework from which you will expand to build a Python SDK. Section Wrap up In this section, you used your knowledge of version control to clone down a shared repository, initialize the Docker container, and open the project in your preferred editor. These are some of the most fundamental steps in getting started on your shared project. Next, you'll start the SDK project by creating a Python package. It's OK if you are not experienced with creating a Python package; the following sections will walk you through that process.","title":"Setup"},{"location":"module-0/#getting-setup","text":"As with any development project there are some initial setup steps that are required to get things rolling. In the case of this walk-through, the repository already exists as a starting point. This section walks you through the process of cloning that repository down to your local machine, activating the development environment, and opening the project in your Integrated Development Environment.","title":"Getting Setup"},{"location":"module-0/#clone-the-repo","text":"One of the very first skills you learn when starting the journey to becoming an automation engineer is version control. This is a key skill in the development/automation lifecycle. There are many, many command line options and details to understand about git but in typical daily workflows you will find yourself using a subset of them. Below are the six most common git commands used in a typical development workflow. Many IDE's provide version control integration that allows you to utilize the UI in order to perform these functions. You can chose what method works best for your personal workflow. The steps below show how to clone a repo from a terminal window.","title":"Clone the Repo"},{"location":"module-0/#steps","text":"STEP 1. NAVIGATE to the repo on GitHub building-a-python-sdk (Login to GitHub if required) STEP 2. CLICK the Code button STEP 3. SELECT the transport (HTTPS or SSH) STEP 4. CLICK the Copy icon STEP 5. OPEN a new Terminal STEP 6. PASTE git clone plus that string into your Terminal Example SSH git clone git@github.com:wwt/building-a-python-sdk.git HTTPS git clone https://github.com/wwt/building-a-python-sdk.git Important The command above will clone down the repository creating a subfolder with the name of the repo in the folder where you ran the command.","title":"STEPS"},{"location":"module-0/#development-environment","text":"All code in this walk-through was developed in a Docker container that was created from the Dockerfile included in the repository. Including the Dockerfile in the repository means we can avoid the \"...it works on my machine problem...\" by using containers and also makes the container definition travel adjacent to the code. Below will cover using the Docker container for your execution environment. Just click the tab that meets your needs: STEP 1. OPEN the new Folder in your Integrated Development Environment Visual Studio Code If you are running Visual Studio Code as your IDE, and have the Remove Development Extension pack installed ( ms-vscode-remote.vscode-remote-extensionpack ) you can simply open the root directory of this project, then select Reopen in Container when prompted (dialog box in the lower right corner). The repository contains a portable development environment in the form of a Dockerfile , requirements.txt , and .devcontainer.json files. This special integration with Visual Studio Code simplifies developing in a containerized development environment non-Visual Studio Code If you are not using Visual Studio Code you can still utilize the Dockerfile packaged with the repository but some manual build and launch steps will be necessary. Ensure you are in the root of the building-a-python-sdk project BUILD the Docker Image docker image build -t building-a-python-sdk . RUN the Docker Container docker container run -itv $PWD:/building-a-python-sdk building-a-python-sdk This repo contains a starting framework from which you will expand to build a Python SDK.","title":"Development Environment"},{"location":"module-0/#section-wrap-up","text":"In this section, you used your knowledge of version control to clone down a shared repository, initialize the Docker container, and open the project in your preferred editor. These are some of the most fundamental steps in getting started on your shared project. Next, you'll start the SDK project by creating a Python package. It's OK if you are not experienced with creating a Python package; the following sections will walk you through that process.","title":"Section Wrap up"},{"location":"module-1/","text":"Create a Python Package In this section you will create a Python package that will become your DNA Center SDK. Packages are namespaces which contain multiple packages and modules themselves. They are simply directories, but with a twist. Each package in Python is a directory which MUST contain a special file called __init__.py . This file can be empty, and it indicates that the directory it contains is a Python package, so it can be imported the same way a module can be imported. ref: https://www.learnpython.org/en/Modules_and_Packages Steps The first task is to create the package that will contain our Python modules. Note __init__.py is technically not required as of Python 3.3 STEP 1. CREATE a folder named dnac in the root of the project (cloned) directory mkdir dnac STEP 2. CREATE a file named init .py in the dnac folder touch dnac/__init__.py STEP 3. MODIFY the file permissions to add execute chmod +x dnac/__init__.py Can you import this package? If you completed these steps you can now import your package in the python interpreter. That's exciting! You just created your first Python package. Although it doesn't have any functional purpose yet, you learned some of the foundational mechanics required to start the process.","title":"Python Package"},{"location":"module-1/#create-a-python-package","text":"In this section you will create a Python package that will become your DNA Center SDK. Packages are namespaces which contain multiple packages and modules themselves. They are simply directories, but with a twist. Each package in Python is a directory which MUST contain a special file called __init__.py . This file can be empty, and it indicates that the directory it contains is a Python package, so it can be imported the same way a module can be imported. ref: https://www.learnpython.org/en/Modules_and_Packages","title":"Create a Python Package"},{"location":"module-1/#steps","text":"The first task is to create the package that will contain our Python modules. Note __init__.py is technically not required as of Python 3.3 STEP 1. CREATE a folder named dnac in the root of the project (cloned) directory mkdir dnac STEP 2. CREATE a file named init .py in the dnac folder touch dnac/__init__.py STEP 3. MODIFY the file permissions to add execute chmod +x dnac/__init__.py Can you import this package? If you completed these steps you can now import your package in the python interpreter. That's exciting! You just created your first Python package. Although it doesn't have any functional purpose yet, you learned some of the foundational mechanics required to start the process.","title":"Steps"},{"location":"module-2/","text":"Create a Python Module: session Packages are directories that contain the __init.py__ file and some number of Python files called modules. This section will guide you through creating the first Python module which will handle the session functionality. Modules in Python are simply Python files with a .py extension. The name of the module will be the name of the file. A Python module can have a set of functions, classes or variables defined and implemented. \u200b ref: https://www.learnpython.org/en/Modules_and_Packages Create the Module File STEP 1 . CREATE a file named session.py in the dnac folder This Python file (module) will sub-class the requests.Session class and serve as our object to handle all things related to the HTTP(S) session with DNA Center. Read More About Class Inheritance in Python Real Python 'Super Change Your Classes with super()' STEP 2 . ADD the base session text (copy and paste the code below) Note The requests package is the de facto standard Python package for making HTTP requests. You can read more about the Python package requests #!/usr/bin/env python import requests class dnaCenterSession ( requests . Session ): \"\"\"DNA Center Session Object Args: requests (Session): Sub-classes requests.Session \"\"\" def __init__ ( self , * args : list , ** kwargs : dict ): \"\"\" Initialize dnaCenterSession \"\"\" super ( dnaCenterSession , self ) . __init__ ( * args , ** kwargs ) self . headers . update ( { 'Content-Type' : 'application/json' } ) def set_basic_auth ( self , username : str , password : str ): \"\"\"Set the credentials for Basic Auth on the session object Args: username (str): username for basic auth password (str): password for basic auth \"\"\" self . auth = ( username , password ) def set_verify ( self , verify : bool ): \"\"\"Sets the verify boolean of a request.Session object Args: verify (bool): Boolean for validating certificates \"\"\" self . verify = verify STEP 3 . SAVE the file What does this do? This Python module illustrates the use of sub-classing, a key concept in object-oriented programming, to utilize all of the existing functionality in the requests package while providing the ability to customize settings for our specific use case. The __init__ method calls the __init__ method of the parent class ( requests.sessions.Session ) using the super() function and sets a header value for all calls. The set_basic_auth method sets the attribute named auth of the Session object. The set_verify method sets the boolean value for checking the validity of certificates or not during session establishment. This simple example illustrates the power and simplicity of object oriented programming. See requests documentation for more info on the library.","title":"The Session Module"},{"location":"module-2/#create-a-python-module-session","text":"Packages are directories that contain the __init.py__ file and some number of Python files called modules. This section will guide you through creating the first Python module which will handle the session functionality. Modules in Python are simply Python files with a .py extension. The name of the module will be the name of the file. A Python module can have a set of functions, classes or variables defined and implemented. \u200b ref: https://www.learnpython.org/en/Modules_and_Packages","title":"Create a Python Module: session"},{"location":"module-2/#create-the-module-file","text":"STEP 1 . CREATE a file named session.py in the dnac folder This Python file (module) will sub-class the requests.Session class and serve as our object to handle all things related to the HTTP(S) session with DNA Center. Read More About Class Inheritance in Python Real Python 'Super Change Your Classes with super()' STEP 2 . ADD the base session text (copy and paste the code below) Note The requests package is the de facto standard Python package for making HTTP requests. You can read more about the Python package requests #!/usr/bin/env python import requests class dnaCenterSession ( requests . Session ): \"\"\"DNA Center Session Object Args: requests (Session): Sub-classes requests.Session \"\"\" def __init__ ( self , * args : list , ** kwargs : dict ): \"\"\" Initialize dnaCenterSession \"\"\" super ( dnaCenterSession , self ) . __init__ ( * args , ** kwargs ) self . headers . update ( { 'Content-Type' : 'application/json' } ) def set_basic_auth ( self , username : str , password : str ): \"\"\"Set the credentials for Basic Auth on the session object Args: username (str): username for basic auth password (str): password for basic auth \"\"\" self . auth = ( username , password ) def set_verify ( self , verify : bool ): \"\"\"Sets the verify boolean of a request.Session object Args: verify (bool): Boolean for validating certificates \"\"\" self . verify = verify STEP 3 . SAVE the file","title":"Create the Module File"},{"location":"module-2/#what-does-this-do","text":"This Python module illustrates the use of sub-classing, a key concept in object-oriented programming, to utilize all of the existing functionality in the requests package while providing the ability to customize settings for our specific use case. The __init__ method calls the __init__ method of the parent class ( requests.sessions.Session ) using the super() function and sets a header value for all calls. The set_basic_auth method sets the attribute named auth of the Session object. The set_verify method sets the boolean value for checking the validity of certificates or not during session establishment. This simple example illustrates the power and simplicity of object oriented programming. See requests documentation for more info on the library.","title":"What does this do?"},{"location":"module-3/","text":"Create a Python Module: client The job of the client module is to wrap the REST endpoints available on the platform and serve as the interface to the consumer. This section will build the API wrapper module using a combination of resources as a reference. DNA Center API Documentation Python Classes The client is the Python object that is the external interface for the SDK. A consumer of this SDK would instantiate an instance of the client where all of the necessary methods would exist for interacting with the target system, DNA Center. Create the Module STEP 1. CREATE a file named client.py in the dnac/ directory (the package) touch dnac/client.py Python modules are just files with the .py extension. STEP 2. OPEN the dnac/client.py file in your editor STEP 3. import the REST Client you created using relative imports This is the session module that you created in the last section and it will be referenced here. from .session import dnaCenterSession Read More on Relative Imports Here is a reference for Relative Imports in Python STEP 4. CREATE a class named dnaCenterApi Since this is the wrapper class it isn't inheriting from any other existing class (except Object which is implied). This is the main interface to the consumer of our SDK. class dnaCenterApi : \"\"\" DNA Center API Wrapper Class \"\"\" STEP 5. DEFINE a method named __init__ The __init__ constructor determines how an object is instantiated from a class. I this case the __init__ method will create a new dnaCenterSesssion object, set the auth and verify values, then call get_token to obtain a reusable token for all future calls. def __init__ ( self , host : str , username : str , password : str , verify : bool = True ): \"\"\"Initialize the dnaCenterApi class object. dnaCenterAPI provides an interface to the REST API of Cisco DNA Center Args: host (str): IP Address or Fully Qualified Domain Name of the DNA Center Appliance username (str): username is used for initial Basic Auth password (str): password verify (bool, optional): Certificate verification flag. Defaults to True. \"\"\" self . session = dnaCenterSession () self . host = host self . base_url = f \"https:// { host } \" if username and password : self . session . set_basic_auth ( username , password ) self . session . set_verify ( verify ) self . get_token () STEP 6. DEFINE a method named get_token This is only method that will use Basic Auth . All other methods will utilize the token that is added to the header in this method. def get_token ( self ) -> str : \"\"\"Obtain an authentication token for subsequent API calls Returns: str: Token string that will be set in the x-auth-token header of the self.session object \"\"\" _response = self . session . post ( self . _build_url ( '/dna/system/api/v1/auth/token' ) ) if _response . ok : print ( f \"Successfully established a session with: { self . host } \" ) self . session . headers . update ( { 'x-auth-token' : _response . json () . get ( 'Token' ) } ) STEP 7. DEFINE a method named _build_url This is a simple example of abstracting code that would need to be repeated in every API endpoint wrapper into its own method. def _build_url ( self , resource : str ) -> str : \"\"\"Generate the full URL based on the self.base_url plus the provided resource (API endpoint) Args: resource (str): API Endpoint suffix as found in the API documentation Returns: str: Full URL for API call \"\"\" return self . base_url + resource STEP 8. DEFINE a method named _make_request The _make_request_ method is responsible for executing the requests.Session.request method which is associated with the self.session attribute of our client . def _make_request ( self , method : str , url : str , json : dict = None , params : dict = None ): \"\"\"Execute the request method of the Session object Args: method (str): HTTP Method passed to the session object [ GET, POST, PUT, PATCH, DELETE ] url (str): Full URL of the API endpoint json (dict, optional): Body if required. Defaults to None. params (dict, optional): [description]. Defaults to None. Returns: [type]: [description] \"\"\" results = self . session . request ( method , url , json = json , params = params ) if results . ok : return results . json () results . raise_for_status () STEP 9. SAVE the file You did it! Launch iPython and see if your code works. STEP 10. OPEN a Python Interpreter STEP 11. PASTE the text below from dnac.client import dnaCenterApi dnac = dnaCenterApi ( 'sandboxdnac2.cisco.com' , 'devnetuser' , 'Cisco123!' ) Add API Wrapper Method to Get Sites Now that the basic mechanics of your API Client work and you can establish a session with a DNA Center it's time to add some functions to target specific REST Endpoints. The first endpoint that will be added is the site endpoint. The get_sites method of our dnaCenterApi client targets the /dna/intent/api/v1/site endpoint and takes a single parameter named params . Since this is specifically wrapping a GET request, the params parameter allows you to pass a dictionary of key/value pairs that will serve as the query parameters for that call. See the DNA Center API for more details on fields available. def get_sites ( self , params : dict = None ) -> dict : \"\"\"Retrieve the sites from DNA Center Args: params (dict, optional): query parameters to filter the results. Defaults to None. Returns: dict: dictionary of the response from DNA Center \"\"\" resource = \"/dna/intent/api/v1/site\" return self . _make_request ( 'GET' , self . _build_url ( resource ), params = params ) Add API Wrapper Method to Get Network Devices def get_network_devices ( self , params : dict = None ) -> dict : \"\"\"Retrieves network devices from DNA Center Args: params (dict, optional): query parameters to filter the results. Defaults to None. Returns: dict: Network Devices \"\"\" resource = \"/dna/intent/api/v1/network-device\" return self . _make_request ( 'GET' , self . _build_url ( resource ), params = params ) Save Your Work! Don't forget to your work! Full File This is what the full file will look like for comparison. You can also copy this and paste it over the contents you have created to be sure. #!/usr/bin/env python from .session import dnaCenterSession class dnaCenterApi : \"\"\" DNA Center API Wrapper Class \"\"\" def __init__ ( self , host : str , username : str , password : str , verify : bool = True ): \"\"\"Initialize the dnaCenterApi class object. dnaCenterAPI provides an interface to the REST API of Cisco DNA Center Args: host (str): IP Address or Fully Qualified Domain Name of the DNA Center Appliance username (str): username is used for initial Basic Auth password (str): password verify (bool, optional): Certificate verification flag. Defaults to True. \"\"\" self . session = dnaCenterSession () self . host = host self . base_url = f \"https:// { host } \" if username and password : self . session . set_basic_auth ( username , password ) self . session . set_verify ( verify ) self . get_token () def get_token ( self ) -> str : \"\"\"Obtain an authentication token for subsequent API calls Returns: str: Token string that will be set in the x-auth-token header of the self.session object \"\"\" _response = self . session . post ( self . _build_url ( '/dna/system/api/v1/auth/token' ) ) if _response . ok : print ( f \"Successfully established a session with: { self . host } \" ) self . session . headers . update ( { 'x-auth-token' : _response . json () . get ( 'Token' ) } ) def _build_url ( self , resource : str ) -> str : \"\"\"Generate the full URL based on the self.base_url plus the provided resource (API endpoint) Args: resource (str): API Endpoint suffix as found in the API documentation Returns: str: Full URL for API call \"\"\" return self . base_url + resource def _make_request ( self , method : str , url : str , json : dict = None , params : dict = None ): \"\"\"Execute the request method of the Session object Args: method (str): HTTP Method passed to the session object [ GET, POST, PUT, PATCH, DELETE ] url (str): Full URL of the API endpoint json (dict, optional): Body if required. Defaults to None. params (dict, optional): [description]. Defaults to None. Returns: [type]: [description] \"\"\" results = self . session . request ( method , url , json = json , params = params ) if results . ok : return results . json () results . raise_for_status () # API Endpoints def get_sites ( self , params : dict = None ) -> dict : \"\"\"Retrieve the sites from DNA Center Args: params (dict, optional): query parameters to filter the results. Defaults to None. Returns: dict: dictionary of the response from DNA Center \"\"\" resource = \"/dna/intent/api/v1/site\" return self . _make_request ( 'GET' , self . _build_url ( resource ), params = params ) def get_network_devices ( self , params : dict = None ) -> dict : \"\"\"Retrieves network devices from DNA Center Args: params (dict, optional): query parameters to filter the results. Defaults to None. Returns: dict: Network Devices \"\"\" resource = \"/dna/intent/api/v1/network-device\" return self . _make_request ( 'GET' , self . _build_url ( resource ), params = params ) Section Wrap up You now have a functional Python package that includes a session object and a client object. This package allows you to establish a connection/session with Cisco DNA Center and retrieve the sites and/or network devices using API methods you wrote to wrap the API endpoints. In the next section you will write a simple Python script that uses this package. The point of write a package to reduce the amount of code you have to write on subsequent tasks with the same logic.","title":"The API Wrapper Module"},{"location":"module-3/#create-a-python-module-client","text":"The job of the client module is to wrap the REST endpoints available on the platform and serve as the interface to the consumer. This section will build the API wrapper module using a combination of resources as a reference. DNA Center API Documentation Python Classes The client is the Python object that is the external interface for the SDK. A consumer of this SDK would instantiate an instance of the client where all of the necessary methods would exist for interacting with the target system, DNA Center.","title":"Create a Python Module: client"},{"location":"module-3/#create-the-module","text":"STEP 1. CREATE a file named client.py in the dnac/ directory (the package) touch dnac/client.py Python modules are just files with the .py extension. STEP 2. OPEN the dnac/client.py file in your editor STEP 3. import the REST Client you created using relative imports This is the session module that you created in the last section and it will be referenced here. from .session import dnaCenterSession Read More on Relative Imports Here is a reference for Relative Imports in Python STEP 4. CREATE a class named dnaCenterApi Since this is the wrapper class it isn't inheriting from any other existing class (except Object which is implied). This is the main interface to the consumer of our SDK. class dnaCenterApi : \"\"\" DNA Center API Wrapper Class \"\"\" STEP 5. DEFINE a method named __init__ The __init__ constructor determines how an object is instantiated from a class. I this case the __init__ method will create a new dnaCenterSesssion object, set the auth and verify values, then call get_token to obtain a reusable token for all future calls. def __init__ ( self , host : str , username : str , password : str , verify : bool = True ): \"\"\"Initialize the dnaCenterApi class object. dnaCenterAPI provides an interface to the REST API of Cisco DNA Center Args: host (str): IP Address or Fully Qualified Domain Name of the DNA Center Appliance username (str): username is used for initial Basic Auth password (str): password verify (bool, optional): Certificate verification flag. Defaults to True. \"\"\" self . session = dnaCenterSession () self . host = host self . base_url = f \"https:// { host } \" if username and password : self . session . set_basic_auth ( username , password ) self . session . set_verify ( verify ) self . get_token () STEP 6. DEFINE a method named get_token This is only method that will use Basic Auth . All other methods will utilize the token that is added to the header in this method. def get_token ( self ) -> str : \"\"\"Obtain an authentication token for subsequent API calls Returns: str: Token string that will be set in the x-auth-token header of the self.session object \"\"\" _response = self . session . post ( self . _build_url ( '/dna/system/api/v1/auth/token' ) ) if _response . ok : print ( f \"Successfully established a session with: { self . host } \" ) self . session . headers . update ( { 'x-auth-token' : _response . json () . get ( 'Token' ) } ) STEP 7. DEFINE a method named _build_url This is a simple example of abstracting code that would need to be repeated in every API endpoint wrapper into its own method. def _build_url ( self , resource : str ) -> str : \"\"\"Generate the full URL based on the self.base_url plus the provided resource (API endpoint) Args: resource (str): API Endpoint suffix as found in the API documentation Returns: str: Full URL for API call \"\"\" return self . base_url + resource STEP 8. DEFINE a method named _make_request The _make_request_ method is responsible for executing the requests.Session.request method which is associated with the self.session attribute of our client . def _make_request ( self , method : str , url : str , json : dict = None , params : dict = None ): \"\"\"Execute the request method of the Session object Args: method (str): HTTP Method passed to the session object [ GET, POST, PUT, PATCH, DELETE ] url (str): Full URL of the API endpoint json (dict, optional): Body if required. Defaults to None. params (dict, optional): [description]. Defaults to None. Returns: [type]: [description] \"\"\" results = self . session . request ( method , url , json = json , params = params ) if results . ok : return results . json () results . raise_for_status () STEP 9. SAVE the file You did it! Launch iPython and see if your code works. STEP 10. OPEN a Python Interpreter STEP 11. PASTE the text below from dnac.client import dnaCenterApi dnac = dnaCenterApi ( 'sandboxdnac2.cisco.com' , 'devnetuser' , 'Cisco123!' )","title":"Create the Module"},{"location":"module-3/#add-api-wrapper-method-to-get-sites","text":"Now that the basic mechanics of your API Client work and you can establish a session with a DNA Center it's time to add some functions to target specific REST Endpoints. The first endpoint that will be added is the site endpoint. The get_sites method of our dnaCenterApi client targets the /dna/intent/api/v1/site endpoint and takes a single parameter named params . Since this is specifically wrapping a GET request, the params parameter allows you to pass a dictionary of key/value pairs that will serve as the query parameters for that call. See the DNA Center API for more details on fields available. def get_sites ( self , params : dict = None ) -> dict : \"\"\"Retrieve the sites from DNA Center Args: params (dict, optional): query parameters to filter the results. Defaults to None. Returns: dict: dictionary of the response from DNA Center \"\"\" resource = \"/dna/intent/api/v1/site\" return self . _make_request ( 'GET' , self . _build_url ( resource ), params = params )","title":"Add API Wrapper Method to Get Sites"},{"location":"module-3/#add-api-wrapper-method-to-get-network-devices","text":"def get_network_devices ( self , params : dict = None ) -> dict : \"\"\"Retrieves network devices from DNA Center Args: params (dict, optional): query parameters to filter the results. Defaults to None. Returns: dict: Network Devices \"\"\" resource = \"/dna/intent/api/v1/network-device\" return self . _make_request ( 'GET' , self . _build_url ( resource ), params = params ) Save Your Work! Don't forget to your work!","title":"Add API Wrapper Method to Get Network Devices"},{"location":"module-3/#full-file","text":"This is what the full file will look like for comparison. You can also copy this and paste it over the contents you have created to be sure. #!/usr/bin/env python from .session import dnaCenterSession class dnaCenterApi : \"\"\" DNA Center API Wrapper Class \"\"\" def __init__ ( self , host : str , username : str , password : str , verify : bool = True ): \"\"\"Initialize the dnaCenterApi class object. dnaCenterAPI provides an interface to the REST API of Cisco DNA Center Args: host (str): IP Address or Fully Qualified Domain Name of the DNA Center Appliance username (str): username is used for initial Basic Auth password (str): password verify (bool, optional): Certificate verification flag. Defaults to True. \"\"\" self . session = dnaCenterSession () self . host = host self . base_url = f \"https:// { host } \" if username and password : self . session . set_basic_auth ( username , password ) self . session . set_verify ( verify ) self . get_token () def get_token ( self ) -> str : \"\"\"Obtain an authentication token for subsequent API calls Returns: str: Token string that will be set in the x-auth-token header of the self.session object \"\"\" _response = self . session . post ( self . _build_url ( '/dna/system/api/v1/auth/token' ) ) if _response . ok : print ( f \"Successfully established a session with: { self . host } \" ) self . session . headers . update ( { 'x-auth-token' : _response . json () . get ( 'Token' ) } ) def _build_url ( self , resource : str ) -> str : \"\"\"Generate the full URL based on the self.base_url plus the provided resource (API endpoint) Args: resource (str): API Endpoint suffix as found in the API documentation Returns: str: Full URL for API call \"\"\" return self . base_url + resource def _make_request ( self , method : str , url : str , json : dict = None , params : dict = None ): \"\"\"Execute the request method of the Session object Args: method (str): HTTP Method passed to the session object [ GET, POST, PUT, PATCH, DELETE ] url (str): Full URL of the API endpoint json (dict, optional): Body if required. Defaults to None. params (dict, optional): [description]. Defaults to None. Returns: [type]: [description] \"\"\" results = self . session . request ( method , url , json = json , params = params ) if results . ok : return results . json () results . raise_for_status () # API Endpoints def get_sites ( self , params : dict = None ) -> dict : \"\"\"Retrieve the sites from DNA Center Args: params (dict, optional): query parameters to filter the results. Defaults to None. Returns: dict: dictionary of the response from DNA Center \"\"\" resource = \"/dna/intent/api/v1/site\" return self . _make_request ( 'GET' , self . _build_url ( resource ), params = params ) def get_network_devices ( self , params : dict = None ) -> dict : \"\"\"Retrieves network devices from DNA Center Args: params (dict, optional): query parameters to filter the results. Defaults to None. Returns: dict: Network Devices \"\"\" resource = \"/dna/intent/api/v1/network-device\" return self . _make_request ( 'GET' , self . _build_url ( resource ), params = params )","title":"Full File"},{"location":"module-3/#section-wrap-up","text":"You now have a functional Python package that includes a session object and a client object. This package allows you to establish a connection/session with Cisco DNA Center and retrieve the sites and/or network devices using API methods you wrote to wrap the API endpoints. In the next section you will write a simple Python script that uses this package. The point of write a package to reduce the amount of code you have to write on subsequent tasks with the same logic.","title":"Section Wrap up"},{"location":"module-4/","text":"Create a Python Script Now that you have created the minimum elements of your DNAC SDK you can use it in a python script just like any other module or package. This section will illustrate creating and executing a simple python script that utilizes the Python package just created. Steps STEP 1. CREATE a file named test_dnac_sdk.py in the root of the project touch test_dnac_sdk.py STEP 2. OPEN the test_dnac_sdk.py file in your editor STEP 3. PASTE the following code into the file from pprint import pprint from dnac.client import dnaCenterApi dnac = dnaCenterApi ( 'sandboxdnac2.cisco.com' , 'devnetuser' , 'Cisco123!' , verify = True ) # Retrieve and Print DNA Center Sites site_query = { \"type\" : \"building\" } sites = dnac . get_sites ( params = site_query ) pprint ( sites ) # Retrieve and Pring DNA Center Network Devices devices = dnac . get_network_devices () pprint ( devices ) STEP 4. SAVE the file STEP 5. EXECUTE the script This step is executed in the development environment (Docker Container). Please ensure your terminal is connected to that container. python test_dnac_sdk.py","title":"The Calling Script"},{"location":"module-4/#create-a-python-script","text":"Now that you have created the minimum elements of your DNAC SDK you can use it in a python script just like any other module or package. This section will illustrate creating and executing a simple python script that utilizes the Python package just created.","title":"Create a Python Script"},{"location":"module-4/#steps","text":"STEP 1. CREATE a file named test_dnac_sdk.py in the root of the project touch test_dnac_sdk.py STEP 2. OPEN the test_dnac_sdk.py file in your editor STEP 3. PASTE the following code into the file from pprint import pprint from dnac.client import dnaCenterApi dnac = dnaCenterApi ( 'sandboxdnac2.cisco.com' , 'devnetuser' , 'Cisco123!' , verify = True ) # Retrieve and Print DNA Center Sites site_query = { \"type\" : \"building\" } sites = dnac . get_sites ( params = site_query ) pprint ( sites ) # Retrieve and Pring DNA Center Network Devices devices = dnac . get_network_devices () pprint ( devices ) STEP 4. SAVE the file STEP 5. EXECUTE the script This step is executed in the development environment (Docker Container). Please ensure your terminal is connected to that container. python test_dnac_sdk.py","title":"Steps"},{"location":"next_steps/","text":"Action Required! Now that you have seen a walk through of creating a basic Python SDK using your knowledge of version control, Python, APIs, etc try to create your own SDK for learning focused on one of the other Cisco Products: Webex Teams Meraki Cisco SD WAN Cisco ACI The goal is to practice writing code in Python, reading and translating API documentation, and building the muscle memory that will make you success in your future development projects. Other things you could do is add to this project elements such as logging, exceptions, etc.","title":"Call to Action"},{"location":"next_steps/#action-required","text":"Now that you have seen a walk through of creating a basic Python SDK using your knowledge of version control, Python, APIs, etc try to create your own SDK for learning focused on one of the other Cisco Products: Webex Teams Meraki Cisco SD WAN Cisco ACI The goal is to practice writing code in Python, reading and translating API documentation, and building the muscle memory that will make you success in your future development projects. Other things you could do is add to this project elements such as logging, exceptions, etc.","title":"Action Required!"}]}